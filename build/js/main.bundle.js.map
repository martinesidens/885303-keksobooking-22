{"version":3,"sources":["webpack://keksobooking/./source/js/util.js","webpack://keksobooking/./source/js/form.js","webpack://keksobooking/./source/js/map.js","webpack://keksobooking/./source/js/server.js","webpack://keksobooking/./source/js/get-card.js","webpack://keksobooking/./source/js/map-filters.js","webpack://keksobooking/./source/js/photo.js","webpack://keksobooking/./source/js/main.js"],"names":["success","document","querySelector","content","pushSuccessMessage","messageContainer","appendChild","message","addEventListener","evt","hideMessage","setFormDefault","key","preventDefault","root","element","removeChild","pushFailureMessage","failure","buttonError","classList","add","formElement","interactiveElements","querySelectorAll","mapFormElement","mapFilterElements","priceElement","roomNumber","capacityGuests","closeButton","titleAdvertisement","MIN_VALUE_FOR_HOUSING","flat","bungalow","house","palace","capacityGuestsOne","capacityGuestsTwo","capacityGuestsThree","capacityGuestsHundred","switchForm","toggle","forEach","toggleAttribute","setDefault","hasAttribute","removeAttribute","reset","value","mainLatLngElement","mainMarker","setLatLng","LAT","LNG","setAttribute","typeHousingSelected","target","placeholder","time","timeOut","timeIn","valueLength","length","setCustomValidity","reportValidity","formData","FormData","fetch","method","body","then","response","ok","Error","status","statusText","catch","templateCard","myIcon","L","icon","iconUrl","iconSize","iconAnchor","popupAnchor","shadowSize","shadowAnchor","marker","lat","lng","draggable","commonIcon","commonMarker","map","removeMarkers","list","remove","mapFiltersForm","listFilters","filterDataHandler","mapFilters","values","push","location","addTo","bindPopup","advertisementElement","advertisement","cloneNode","textContent","offer","title","address","price","typeHousing","type","rooms","guests","checkin","checkout","features","feature","photos","srcImage","srcImageElement","src","author","avatar","getAdvertisementElement","createMarkers","renderMarkers","filter","getValue","data","includes","getValuePrice","findElementType","FILE_TYPES","fileChoseElement","preview","json","alertContainer","createElement","style","zIndex","position","left","top","right","padding","fontSize","textAlign","backgroundColor","append","setTimeout","showAlert","_","debounce","bind","undefined","on","setView","tileLayer","attribution","parseFloat","getLatLng","toFixed","file","files","fileName","name","toLowerCase","some","endsWith","reader","FileReader","result","readAsDataURL"],"mappings":"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","file":"main.bundle.js","sourcesContent":["import {setFormDefault} from './form.js';\n\nconst ALERT_SHOW_TIME = 10000;\n\nfunction showAlert (message) {\n  const alertContainer = document.createElement('div');\n  alertContainer.style.zIndex = 100;\n  alertContainer.style.position = 'absolute';\n  alertContainer.style.left = 0;\n  alertContainer.style.top = 0;\n  alertContainer.style.right = 0;\n  alertContainer.style.padding = '10px 3px';\n  alertContainer.style.fontSize = '30px';\n  alertContainer.style.textAlign = 'center';\n  alertContainer.style.backgroundColor = '#FF7F50';\n\n  alertContainer.textContent = message;\n\n  document.body.append(alertContainer);\n\n  setTimeDelay(alertContainer);\n}\n\nfunction setTimeDelay (element) {\n  setTimeout(() => {\n    element.remove();\n  }, ALERT_SHOW_TIME);\n}\n\nconst success = document.querySelector('#success').content;\n\nfunction pushSuccessMessage() {\n  const messageContainer = document.querySelector('main');\n  messageContainer.appendChild(success);\n  const message = messageContainer.querySelector('.success');\n\n  message.addEventListener('click', (evt) => {\n    hideMessage(messageContainer, message);\n    setFormDefault(evt);\n  });\n\n  document.addEventListener('keydown', (evt) => {\n    if (evt.key === ('Escape' || 'Esc')) {\n      evt.preventDefault();\n      hideMessage(messageContainer, message);\n      setFormDefault(evt);\n    }\n  });\n}\n\nfunction hideMessage (root, element) {\n  root.removeChild(element);\n}\n\nfunction pushFailureMessage() {\n  const messageContainer = document.querySelector('main');\n  const failure = document.querySelector('#error').content;\n  messageContainer.appendChild(failure);\n  const message = messageContainer.querySelector('.error');\n  const buttonError = message.querySelector('.error__button');\n\n  message.addEventListener('click', () => {\n    hideMessage(messageContainer, message);\n    setFormDefault();\n  });\n\n  document.addEventListener('keydown', (evt) => {\n    if (evt.key === ('Escape' || 'Esc')) {\n      hideMessage(messageContainer, message);\n    }\n  });\n\n  buttonError.addEventListener('click', () => {\n    message.classList.add('hidden');\n  });\n}\n\nexport {showAlert, pushSuccessMessage, pushFailureMessage};\n","import {pushData} from './server.js';\nimport {mainLatLngElement, resetMainMarker} from './map.js';\n\nconst formElement = document.querySelector('.ad-form');\nconst interactiveElements = formElement.querySelectorAll('fieldset');\nconst mapFormElement = document.querySelector('.map__filters');\nconst mapFilterElements = mapFormElement.querySelectorAll('select');\nconst priceElement = document.querySelector('#price');\nconst roomNumber = document.querySelector('#room_number');\nconst capacityGuests = document.querySelector('#capacity');\nconst closeButton = document.querySelector('.ad-form__reset');\n\nconst MIN_NAME_LENGTH = 30;\nconst MAX_NAME_LENGTH = 100;\nconst titleAdvertisement = document.querySelector('#title');\n\nconst MIN_VALUE_FOR_HOUSING = {\n  flat: 1000,\n  bungalow: 0,\n  house: 5000,\n  palace: 10000,\n}\n\nconst MAX_PRICE = 1000000;\n\nconst capacityGuestsOne = capacityGuests[2];\nconst capacityGuestsTwo = capacityGuests[1];\nconst capacityGuestsThree = capacityGuests[0];\nconst capacityGuestsHundred = capacityGuests[3];\n\nfunction switchForm () {\n  formElement.classList.toggle('ad-form--disabled');\n  mapFormElement.classList.toggle('ad-form--disabled');\n\n  interactiveElements.forEach((element) => {\n    element.toggleAttribute('disabled');\n  })\n\n  mapFilterElements.forEach((element) => {\n    element.toggleAttribute('disabled');\n  })\n\n  setDefault();\n\n  if (capacityGuestsOne.hasAttribute('disabled')) {\n    capacityGuestsOne.removeAttribute('disabled');\n  }\n}\n\nfunction onChangePrice (evt) {\n  const typeHousingSelected = evt.target.value;\n  priceElement.value = MIN_VALUE_FOR_HOUSING[typeHousingSelected];\n  priceElement.placeholder = MIN_VALUE_FOR_HOUSING[typeHousingSelected];\n}\n\nfunction onChangeTimeIn (evt) {\n  const time = evt.target.value;\n  const timeOut = document.querySelector('#timeout');\n  switch (time) {\n    case '12:00':\n      timeOut.value = '12:00';\n      break;\n    case '13:00':\n      timeOut.value = '13:00';\n      break;\n    case '14:00':\n      timeOut.value = '14:00';\n      break;\n  }\n}\n\nfunction onChangeTimeOut (evt) {\n  const time = evt.target.value;\n  const timeIn = document.querySelector('#timein');\n  switch (time) {\n    case '12:00':\n      timeIn.value = '12:00';\n      break;\n    case '13:00':\n      timeIn.value = '13:00';\n      break;\n    case '14:00':\n      timeIn.value = '14:00';\n      break;\n  }\n}\n\ndocument.querySelector('#type').addEventListener('change', onChangePrice);\ndocument.querySelector('#timein').addEventListener('change', onChangeTimeIn);\ndocument.querySelector('#timeout').addEventListener('change', onChangeTimeOut);\n\ntitleAdvertisement.addEventListener('input', () => {\n  const valueLength = titleAdvertisement.value.length;\n\n  if (valueLength < MIN_NAME_LENGTH) {\n    titleAdvertisement.setCustomValidity(`Добавьте ещё ${MIN_NAME_LENGTH - valueLength} символов`);\n  } else if (valueLength > MAX_NAME_LENGTH) {\n    titleAdvertisement.setCustomValidity(`Удалите лишние ${valueLength - MAX_NAME_LENGTH} символы`);\n  } else {\n    titleAdvertisement.setCustomValidity('');\n  }\n  titleAdvertisement.reportValidity();\n});\n\npriceElement.addEventListener('input', () => {\n  if (priceElement.value > MAX_PRICE) {\n    priceElement.setCustomValidity('Введенная сумма превышает максимально возможное значение');\n  } else {\n    priceElement.setCustomValidity('');\n  }\n  priceElement.reportValidity();\n});\n\nfunction setFormDefault () {\n  document.querySelector('.ad-form').reset();\n  document.querySelector('#address').value = '';\n  mainLatLngElement.value = '35.68951, 139.69200';\n  resetMainMarker();\n}\n\nfunction setDefault() {\n  capacityGuestsOne.setAttribute('disabled', 'disabled');\n  capacityGuestsTwo.setAttribute('disabled', 'disabled');\n  capacityGuestsThree.setAttribute('disabled', 'disabled');\n  capacityGuestsHundred.setAttribute('disabled', 'disabled');\n}\n\nroomNumber.addEventListener('change', () => {\n\n  if (roomNumber.value === '100') {\n    setDefault();\n    capacityGuestsHundred.removeAttribute('disabled');\n  } else if (roomNumber.value === '1') {\n    setDefault();\n    capacityGuestsOne.removeAttribute('disabled');\n  } else if (roomNumber.value === '2') {\n    setDefault();\n    capacityGuestsOne.removeAttribute('disabled');\n    capacityGuestsTwo.removeAttribute('disabled');\n  } else if (roomNumber.value === '3') {\n    setDefault();\n    capacityGuestsOne.removeAttribute('disabled');\n    capacityGuestsTwo.removeAttribute('disabled');\n    capacityGuestsThree.removeAttribute('disabled');\n  }\n});\n\n\nfunction createAdvertisementInServer() {\n  formElement.addEventListener('submit', (evt) => {\n    evt.preventDefault();\n    const formData = new FormData(evt.target);\n    pushData(formData);\n  });\n}\n\nfunction clearFormElement () {\n  closeButton.addEventListener('click', setFormDefault);\n}\n\nclearFormElement();\n\ncreateAdvertisementInServer();\n\nexport {switchForm, clearFormElement, setFormDefault};\n","/* global L*/\n\nimport {switchForm} from './form.js';\nimport {getAdvertisementElement} from './get-card.js';\n\nconst mainLatLngElement = document.querySelector('#address');\nmainLatLngElement.value = '35.68951, 139.69200';\n\nconst LAT = 35.68951;\nconst LNG = 139.69200\n\nconst QUANTITY_ADVERTISEMENT = 10;\n\nconst myIcon = L.icon({\n  iconUrl: '../img/main-pin.svg',\n  iconSize: [38, 95],\n  iconAnchor: [26, 52],\n  popupAnchor: [-3, -76],\n  shadowSize: [68, 95],\n  shadowAnchor: [22, 94],\n});\n\nconst mainMarker = L.marker(\n  {\n    lat: LAT,\n    lng: LNG,\n  },\n  {\n    draggable: true,\n    icon: myIcon,\n  },\n);\n\nconst commonIcon = L.icon({\n  iconUrl: '../img/pin.svg',\n  iconSize: [38, 95],\n  iconAnchor: [26, 52],\n  popupAnchor: [-3, -76],\n  shadowSize: [68, 95],\n  shadowAnchor: [22, 94],\n});\n\nconst commonMarker = L.marker(\n  {\n    icon: commonIcon,\n  });\n\n\nconst map = L.map('map-canvas');\n\nfunction setMainMarker () {\n  mainMarker.addTo(map);\n}\n\nfunction resetMainMarker () {\n  mainMarker.setLatLng([LAT, LNG]);\n}\n\nswitchForm();\n\nfunction initMap() {\n  map.on('load', () => {\n    switchForm();\n    mainLatLngElement.value = '35.68951, 139.69200';\n  })\n    .setView([LAT, LNG], 10);\n\n  L.tileLayer(\n    'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n    },\n  ).addTo(map);\n\n  setMainMarker();\n  \n  mainMarker.on('moveend', (evt) => {\n    document.querySelector('#address').value = `${parseFloat(evt.target.getLatLng().lat).toFixed(5)}, ${parseFloat(evt.target.getLatLng().lng).toFixed(5)}`;\n  });\n}\n\nfunction removeMarkers(list) {  \n  list.forEach(() => {\n    commonMarker.remove();\n  });\n}\nconst arrayMarkers = [];\nfunction createMarkers(element) {\n\n  const commonMarker = L.marker(\n    {\n      lat: element.location.lat,\n      lng: element.location.lng,\n    },\n    {\n      icon: commonIcon,\n    },\n  );\n  \n  commonMarker.addTo(map);\n  commonMarker.bindPopup(getAdvertisementElement(element));\n}\n\nfunction setCommonMarkers(list) {\n  list.slice(0, QUANTITY_ADVERTISEMENT).forEach((advertisement) => {\n\n    createMarkers(advertisement);\n  });\n}\n\nexport { initMap, mainLatLngElement, resetMainMarker, setCommonMarkers, removeMarkers, createMarkers, arrayMarkers};\n","import {showAlert, pushSuccessMessage, pushFailureMessage} from './util.js';\n\nfunction getData() {\n  return fetch('https://22.javascript.pages.academy/keksobooking/data')\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n      throw new Error(`${response.status} ${response.statusText}`);\n    })\n    .then((json) => {\n      return json;\n    })\n    .catch(() => {\n      showAlert('Отсутствует соединение с сервером. Проверьте подключение к интернету.');\n    });\n}\n  \nfunction pushData(formData) {\n  fetch('https://22.javascript.pages.academy/keksobooking', {\n    method: 'POST',\n    body: formData,\n  })\n    .then((response) => {\n      if (response.ok) {\n        return response;\n      }\n      throw new Error(`${response.status} ${response.statusText}`);\n    })\n    .then(pushSuccessMessage)\n    .catch(pushFailureMessage);\n}\n\nexport { getData, pushData};\n","import './map.js';\n\nconst templateCard = document.querySelector('#card').content;\n\nfunction getAdvertisementElement (advertisementElement) {\n\n  const advertisement = templateCard.cloneNode(true);\n  advertisement.querySelector('.popup__title').textContent = advertisementElement.offer.title;\n  advertisement.querySelector('.popup__text--address').textContent = advertisementElement.offer.address;\n  advertisement.querySelector('.popup__text--price').textContent = `${advertisementElement.offer.price} ₽/ночь`;\n\n  let typeHousing = advertisementElement.offer.type;\n  switch (typeHousing) {\n    case 'flat':\n      typeHousing = 'Квартира';\n      break;\n    case 'bungalow':\n      typeHousing = 'Бунгало';\n      break;\n    case 'house':\n      typeHousing = 'Дом';\n      break;\n    case 'palace':\n      typeHousing = 'Дворец';\n      break;\n  }\n\n  advertisement.querySelector('.popup__type').textContent = typeHousing;\n  advertisement.querySelector('.popup__text--capacity').textContent = `${advertisementElement.offer.rooms} комнаты для ${advertisementElement.offer.guests} гостей.`;\n  advertisement.querySelector('.popup__text--time').textContent = `Заезд после ${advertisementElement.offer.checkin}, выезд до ${advertisementElement.offer.checkout}`;\n\n  advertisementElement.offer.features.forEach((feature) => {\n    advertisement.querySelector(`.popup__feature--${feature}`).classList.remove('hidden');\n  })\n\n  advertisementElement.offer.photos.forEach((srcImage) => {\n    const srcImageElement = advertisement.querySelector('.popup__photo').cloneNode(false);\n    srcImageElement.src = srcImage;\n    srcImageElement.classList.remove('hidden');\n    advertisement.querySelector('.popup__photos').appendChild(srcImageElement);\n  });\n\n  advertisement.querySelector('.popup__avatar').src = advertisementElement.author.avatar;\n\n  return advertisement;\n}\n\nexport {getAdvertisementElement};\n\n","import {removeMarkers, createMarkers} from './map.js';\n\nconst mapFiltersForm = document.querySelector('.map__filters');\n\nconst MIDDLE_MIN = 10000;\nconst MIDDLE_MAX = 50000;\n\nconst listFilters = [];\n\n\nfunction filterDataHandler(list) {\n  removeMarkers(list);\n  const mapFilters = new FormData(mapFiltersForm);\n  \n  for (const value of mapFilters.values()) {\n    listFilters.push(value);\n  }\n  \n  const filteredList = list.filter((element) => {\n    \n    if (getValue(element.offer.price) === getValuePrice(listFilters, getValue(element.offer.price))) {\n      return true;\n    }\n    \n    if (element.offer.type === findElementType(listFilters, element.offer.type)) {\n      return true;\n    }\n    \n    if (element.offer.rooms === findElementType(listFilters, element.offer.rooms)) {\n      return true;\n    }\n    \n    if (element.offer.guests === findElementType(listFilters, element.offer.guests)) {\n      return true;\n    }\n    \n    element.offer.features.forEach((element) => {\n      if (element === findElementType(listFilters, element)) {\n        return true;\n      }\n    },\n    )\n  });\n\n \n  renderMarkers(filteredList);\n  \n}\n\nfunction renderMarkers(list) {\n  removeMarkers(list);\n  list.forEach((element) => {\n    createMarkers(element);\n  });\n}\n\nfunction setFiltersMap(list) {\n  mapFiltersForm.addEventListener('change', filterDataHandler.bind(undefined, list));\n  \n}\n\nfunction findElementType (data, element) {\n  if (data.includes(element, 0)) {\n    return element;\n  }\n}\n\nfunction getValuePrice (data, value) {\n  if (data.includes(value, 0)) {\n    return value;\n  }\n}\n\nfunction getValue (value) {\n\n  if (value > MIDDLE_MIN && value < MIDDLE_MAX) {\n    return 'middle';\n  } else if (value < MIDDLE_MIN) {\n    return 'low';\n  } else if (value > MIDDLE_MAX) {\n    return 'high';\n  }\n}\nexport {setFiltersMap, filterDataHandler};\n","const FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\n\nconst fileChoseElement = document.querySelector('.ad-form-header__input');\nconst preview = document.querySelector('.ad-form-header__preview img');\n\n\nfunction setAvatarPhoto() {\n  fileChoseElement.addEventListener('change', () => {\n    const file = fileChoseElement.files[0];\n    const fileName = file.name.toLowerCase();\n\n    const matches = FILE_TYPES.some((element) => {\n      return fileName.endsWith(element);\n    });\n\n    if (matches) {\n      const reader = new FileReader();\n\n      reader.addEventListener('load', () => {\n        preview.src = reader.result;\n      });\n      reader.readAsDataURL(file);\n    }\n  });\n}\n\nexport { setAvatarPhoto };\n\n","\n/* global _:readonly */\n\nimport {initMap} from './map.js';\nimport {setFiltersMap} from './map-filters.js'\nimport {getData} from './server.js';\nimport {setAvatarPhoto} from './photo.js';\n\nconst RERENDER_TIME = 500;\n\ngetData().then(_.debounce(setFiltersMap,  RERENDER_TIME));\n\ninitMap();\nsetAvatarPhoto();\n\n"],"sourceRoot":""}